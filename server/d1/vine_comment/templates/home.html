{% extends 'base.html' %}
{% load staticfiles %}
{% block head %}
<link href="{% static 'css/home.css' %}" rel="stylesheet"/>
{% endblock %}

{% block content %}
  <div class="navbar-xs">
  <div class="navbar-primary">
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">藤蔓评论</a>
      </div> <!-- .navbar-header -->
    <div class="navbar-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#" data-toggle="tab" onclick="Best(this)">最优</a></li>
        <li><a href="#best" data-toggle="tab" onclick="Newest(this)">最新</a></li>
        <li><a href="#24-hours-hot" data-toggle="tab" onclick="DayHot(this)">今日最热</a></li>
        <li><a href="#7-days-hot" data-toggle="tab" onclick="WeekHot(this)">7天最热</a></li>
        <li><a href="#30-days-hot" data-toggle="tab" onclick="MonthHot(this)">30天最热</a></li>
      </ul>
      <form class="navbar-form navbar-left" role="search" method="get" action="/search">
        <div class="form-group">
          <input id="search-input" type="text" name="q" class="form-control" placeholder="搜索全站内容" onkeypress="return SearchIfEnter(event)">
        </div>
        <a href="#" onclick="Search(this)"><span class="glyphicon glyphicon-search"></span></a>
      </form>
      <ul class="nav navbar-nav navbar-right">
        {% include 'auth/auth_all__li.html' %}
      </ul>
    </div> <!-- .navbar-collapse -->
  </div> <!-- .container -->
  </div>
  </div> <!-- .navbar-primary -->
  </div> <!-- .navbar-xs -->

  {% include "auth/auth_modal.html" %}

  <div class="container">
    <div id="showMsg" style="padding:10px;">
      {% include 'comments_best.html' %}
    </div> <!-- /#showMsg -->
  </div>
{% endblock %}


{% block footer %}

<script type="text/javascript">
$(document).ready(function(){
	if (!window.btoa) window.btoa = base64.encode;
	$('body').append('<div id="vine_comment_iframe"></div>');
	$.support.cors = true;
	$('#vine_comment_iframe').load("/iframe/" + btoa(document.location));
});
function Best(me) {
  $.get("/home/best")
   .done(function(data){
        $('#showMsg').html(data);
       });
};
function Newest(me) {
  $.get("/home/newest")
   .done(function(data){
        $('#showMsg').html(data);
       });
};
function DayHot(me) {
  $.get("/home/hot/1")
   .done(function(data){
        $('#showMsg').html(data);
       });
};
function WeekHot(me) {
  $.get("/home/hot/7")
   .done(function(data){
        $('#showMsg').html(data);
       });
};
function MonthHot(me) {
  $.get("/home/hot/30")
   .done(function(data){
        $('#showMsg').html(data);
       });
};
function Search(me) {
  $.get("/search/?q=" + document.getElementById('search-input').value)
  .done(function(data) {
    $('#showMsg').html(data);
  });
  return false;
};
function SearchIfEnter(event) {
	//if (!event) { var event = window.event; }
    //event.preventDefault();
    var keypressed = event.keyCode || event.which;
    if (keypressed == 13) {
        Search(this);
        return false;
    }
    return true;
}
//$('#search-input').keyup(SearchIfEnter(event));

Best();
</script>

{% endblock %}
