{% load staticfiles %}

<div class="block">
<div class="page-header">
<h3>Comment Detail <small>{{comment.comment_board}}</small> </h3> 
{% if user == comment.user %}
<a href="/comment/delete/{{comment.id}}">Delete</a>
{% endif %}
<!--TODO: allow administrator to delete-->
</div>


<p>
title: {{ comment.title }}<br/>
{% if user == comment.user %}
comment_str: <p class="autogrow_article"> {{ comment.comment_str }}</p>
{% else %}
comment_str: <p> {{ comment.comment_str }}</p>
{% endif %}
desc: {{ comment.desc }}<br/>
comment_board: {{ comment.comment_board }}<br/>
author_ip: {{ comment.author_ip }}<br/>
user: {{ comment.user }}<br/>
up_users: {{ comment.up_users }}<br/>
down_users: {{ comment.down_users }}<br/>
tags: {%for tag in comment.tags%}{{ tag }},{%endfor%}<br/>
</p>

</div> <!-- .block -->

<script src="{% static 'js/jeditable/jquery.jeditable.js' %}" type="text/javascript" charset="utf-8"></script>
<script src="{% static 'js/jeditable/jquery.jeditable.autogrow.js' %}"></script>
<script src="{% static 'js/jeditable/jquery.autogrow.js' %}"></script>
<script>
   $(".autogrow_article").editable(function(value, settings) {
         $.post("/comment/modify/{{comment.id}}", {'comment_str':value});
         value = value.replace(/\n/g, '<br>');
         $(this).html(value);
       }, { 
       type      : "autogrow",
       submit    : 'OK',
       cancel    : 'cancel',
       tooltip   : "Click to edit...",
       onblur    : "ignore",
       autogrow : {
          lineHeight : 32,
          minHeight  : 32
       },
   });

</script>

